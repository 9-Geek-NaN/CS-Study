## **1. Session**

![image](https://github.com/user-attachments/assets/a16aa343-d6fd-4314-91fe-b80a4a48404b)
사진 출처 : https://dongsik93.github.io/til/2020/01/08/til-authorization(1)/

- 서버에서 사용자의 인증 상태를 저장하는 방식임
- 사용자가 로그인하면 서버에서 세션 ID를 생성하고 클라이언트에 전달함
- 클라이언트는 세션 ID를 쿠키로 저장하고 요청 시마다 서버로 전송함
- 서버는 세션 ID를 확인하여 사용자 정보를 유지함
- 일정 시간이 지나면 만료되거나 서버에서 삭제될 수 있음
- **동작과정**
    
    1. 클라이언트가 웹사이트에 접속해 서버에 요청한다.
    
    2. 서버는 접속한 클라이언트에게 세션 ID를 부여해서 응답한다.
    
    3. 클라이언트는 해당 세션 ID를 헤더 쿠키에 넣어 데이터를 요청한다.
    
    4. 서버는 세션 ID를 통해 클라이언트를 구별하여 데이터를 알맞게 응답한다.
    
    5. 클라이언트가 접속을 종료한다.
    
    6. 서버는 세션 ID를 제거한다.
    

## **2. Cookie**

![image](https://github.com/user-attachments/assets/4dd13ad7-91db-4016-a5ea-f8aac8be8635)
사진 출차 : https://interconnection.tistory.com/74

- 클라이언트 측에 데이터를 저장하는 작은 파일임
- 서버에서 클라이언트로 Set-Cookie 헤더를 통해 쿠키를 전달함
- 클라이언트는 쿠키를 저장하고 이후 요청 시 자동으로 서버로 전송함
- 세션 유지, 사용자 설정 저장, 인증 정보 관리 등에 사용됨
- HttpOnly, Secure, SameSite 등의 옵션을 설정하여 보안을 강화할 수 있음

### 쿠키와 세션의 차이

쿠키와 세션은 비슷한 역할을 하며, 동작원리도 비슷하다. 그 이유는 세션도 결국 쿠키를 사용하기 때문이다.

차이점이 무엇인지 알아보자.

- 사용자의 정보가 저장되는 위치
    - **쿠키 : 서버의 자원을 전혀 사용하지 않음**
    - **세션 : 서버의 자원을 사용**
- 요청 속도
    - **쿠키가 세션보다 더 빠름**
    - 세션은 서버의 처리가 필요하기 때문!!
- 보안
    - **쿠키:** 클라이언트 로컬에 저장되기 때문에 변질되거나 request에서 스니핑 당할 우려가 있어서 **보안에 취약**
    - **세션 :** 쿠키를 이용해서 sessionid 만 저장하고 그것으로 구분해서 서버에서 처리하기 때문에 **비교적 보안성이 좋음**
- 라이프 사이클
    - 쿠키 : 만료시간이 있지만 파일로 저장되기 때문에 브라우저를 종료해도 계속해서 정보가 남아 있을 수 있음
    - 세션 : 만료시간을 정할 수 있지만 브라우저가 종료되면 만료시간에 상관없이 삭제됨

## **3. JWT (JSON Web Token)**

![image](https://github.com/user-attachments/assets/e8bf6d4c-0d63-40dd-b54e-e9fe6d05aff3)
사진 출처 : https://velog.io/@vamos_eon/JWT란-무엇인가-그리고-어떻게-사용하는가-1

- JSON 형식으로 데이터를 저장하고 서명하여 인증에 사용되는 토큰임
- `헤더(header)`, `페이로드(payload)`, `서명(signature)`으로 구성됨
    - **`헤더`** : 토큰 타입, 암호화 알고리즘 명시
    - **`페이로드`** : JWT에 넣을 데이터, JWT 발급 / 만료일 등 명시
    - **`시그니처`** : 헤더, 페이로드가 변조 되었는지를 확인하는 역할
- 토큰 자체에 정보를 포함하고 있어 **서버에서 별도 저장할 필요 없음**
- 클라이언트가 토큰을 보유하면 서버가 토큰을 검증하여 인증 가능함
- 주로 OAuth 2.0과 함께 사용되며 액세스 토큰으로 활용됨
- **탈취 시 재사용 가능성**이 있어 보안 조치가 필요함

## **4. Token**

- 사용자의 인증 및 권한 부여를 위해 발급되는 문자열임
- `액세스 토큰`과 `리프레시 토큰`으로 구분됨
    - **`액세스 토큰`**: 제한된 기간 동안 유효한 인증 토큰임
    - **`리프레시 토큰`**: 액세스 토큰이 만료되었을 때 새로운 액세스 토큰을 발급받기 위해 사용됨
- 세션 기반 인증과 달리 서버에 상태를 저장하지 않고 인증할 수 있음
- JWT, OAuth 2.0 등의 프로토콜에서 사용됨

## **5. SSO (Single Sign-On)**

![image](https://github.com/user-attachments/assets/6e467a6e-b97f-4c1b-b871-2645d7a54b46)

사진 출처 : https://toma0912.tistory.com/75

- 하나의 로그인으로 여러 서비스에 접근할 수 있는 인증 방식임
- 예시 : Google. 구글 로그인만 하면 gmail, google drive, google photo 등 다양한 서비스들을 추가적인 로그인 없이 이용할 수 있음
- 사용자가 한 번 로그인하면 동일한 인증 정보를 여러 서비스에서 공유함
- 기업 내부 시스템, 구글 계정 기반 로그인 등에 활용됨
- 보안 강화를 위해 `SAML(Security Assertion Markup Language)`, `OAuth`, `OpenID Connect` 등이 사용됨
- 로그아웃 시 모든 서비스에서 자동으로 로그아웃될 수 있음

## **6. OAuth 2.0**

![image](https://github.com/user-attachments/assets/bc2a7fa5-b13e-4ab9-a173-98f1e3516506)

- 웹 서핑을 하다 보면 카카오, 애플 등 외부 소셜 계정을 기반으로간편히 회원가입 및 로그인할 수 있는 웹 어플리케이션을 쉽게 찾아볼 수 있음
- 이 때 사용되는 프로토콜이 바로 **OAuth**
- 토큰 기반의 인증 및 권한 부여 프로토콜임
- 클라이언트가 사용자의 비밀번호를 직접 저장하지 않고 외부 인증 서버를 통해 접근 권한을 얻음
- 권한 부여 방식에 따라 여러 가지 플로우가 존재함
    - `Authorization Code` : 가장 안전한 방식으로 리디렉션을 사용함
    - `Implicit` : 브라우저 기반 앱에서 사용되며 보안성이 낮음
    - `Resource Owner Password Credentials` : 사용자 아이디와 비밀번호를 직접 입력하는 방식으로 보안에 취약함
    - `Client Credentials` : 서버 간 인증에 사용됨
- 액세스 토큰을 사용하여 인증 및 리소스 접근을 수행함

## **비교 정리**

| 개념 | 설명 | 사용 방식 | 보안 고려 사항 |
| --- | --- | --- | --- |
| **Session** | 서버에서 세션 ID를 관리하여 인증 상태 유지 | 서버에 상태 저장 | 세션 하이재킹 방지 필요 |
| **Cookie** | 클라이언트에 데이터 저장 | 클라이언트 측에서 자동 전송 | HttpOnly, Secure 옵션 필요 |
| **JWT** | 자체 포함된 토큰으로 인증 수행 | 클라이언트가 토큰 저장 후 사용 | 토큰 탈취 방지 필요 |
| **Token** | 인증 및 권한 부여를 위한 문자열 | 액세스 토큰, 리프레시 토큰 활용 | 짧은 유효기간 설정 필요 |
| **SSO** | 한 번의 로그인으로 여러 서비스 이용 | 중앙 인증 서버 이용 | 로그아웃 처리 주의 필요 |
| **OAuth 2.0** | 토큰 기반 인증 및 권한 부여 | 인증 서버를 통해 토큰 발급 | 액세스 토큰 보안 강화 필요 |

## 참고

https://fomaios.tistory.com/entry/Network-%EC%84%B8%EC%85%98Session%EC%9D%B4%EB%9E%80-What-is-a-Session

https://interconnection.tistory.com/74

https://velog.io/@vamos_eon/JWT%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94%EA%B0%80-1

https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-OAuth-20-%EA%B0%9C%EB%85%90-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC
