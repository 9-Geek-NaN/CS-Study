>**API Gateway**
>
>ν΄λΌμ΄μ–ΈνΈ(μ‚¬μ©μ λλ” μ• ν”λ¦¬μΌ€μ΄μ…)μ™€ λ°±μ—”λ“ μ„λΉ„μ¤(μ„λ²„λ‚ λ°μ΄ν„°λ² μ΄μ¤) μ‚¬μ΄μ—μ„ κ²μ΄νΈμ›¨μ΄(κ΄€λ¬Έ) μ—­ν• μ„ ν•λ” μ¤‘μ”ν• μ»΄ν¬λ„νΈ


- μ‰½κ² λ§ν•΄ ν΄λΌμ΄μ–ΈνΈκ°€ API μ”μ²­μ„ λ³΄λ‚΄λ©΄ μ΄λ¥Ό μ²λ¦¬ν•κ³  μ μ ν• λ°±μ—”λ“ μ„λΉ„μ¤λ΅ μ „λ‹¬ν•λ” **μ¤‘κ°„ κ΄€λ¦¬μ** λΌκ³  ν•  μ μμ
- API μ”μ²­μ„ μμ‹ ν•κ³ , νΈλν”½ μ ν• λ° λ³΄μ• μ •μ±…μ„ μ μ©ν•λ©° μ”μ²­μ„ λ°±μ—”λ“ μ„λΉ„μ¤λ΅ μ „λ‹¬ν• ν›„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°ν™
- API Gatewayλ¥Ό λ“±λ΅ν•΄μ£Όλ©΄, λ¨λ“  ν΄λΌμ΄μ–ΈνΈλ” κ° μ„λΉ„μ¤μ μ—”λ“ν¬μΈνΈ λ€μ‹  API Gatewayλ΅ μ”μ²­μ„ μ „λ‹¬ν•μ—¬ κ΄€λ¦¬κ°€ μ©μ΄ν•΄μ§
    
    β†’ μ‚¬μ©μκ°€ μ„¤μ •ν• λΌμ°ν… μ„¤μ •μ— λ”°λΌ κ° μ—”λ“ν¬μΈνΈλ΅ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ€λ¦¬ν•μ—¬ μ”μ²­ν•κ³  μ‘λ‹µμ„ λ°›μΌλ©΄ λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬ν•λ” **ν”„λ΅μ‹ μ—­ν• **μ„ ν•κΈ° λ•λ¬Έ
    

## API **Gatewayμ μ£Όμ” μ—­ν• **

| **μ—­ν• ** | **μ„¤λ…** |
| --- | --- |
| **μ”μ²­ κ΄€λ¦¬** | ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ μμ‹ , λ¶„μ„, κ²€μ‚¬ ν›„ λ°±μ—”λ“ μ„λΉ„μ¤λ΅ μ „λ‹¬ |
| **λ³΄μ• μ κ³µ** | β€Ά μΈμ¦/μΈκ°€λ¥Ό ν†µν•΄ μ”μ²­μ μ‹ λΆ°μ„±μ„ ν™•μΈ </br> β€Ά ν—μ©/μ°¨λ‹¨ λ©λ΅(Allow-list/Deny-list) κΈ°λ¥μΌλ΅ λ³΄μ•μ„ κ°•ν™” |
| **νΈλν”½ μ μ–΄** | μ”μ²­ μ†λ„ μ ν•(Rate Limiting)μΌλ΅ μ„λ²„ κ³Όλ¶€ν• λ°©μ§€ λ° μ‹μ¤ν… μ•μ •μ„± μ μ§€ |
| **ν”„λ΅ν† μ½ λ³€ν™** | ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ λ°±μ—”λ“ μ„λΉ„μ¤μ—μ„ μ΄ν•΄ν•  μ μλ” ν•νƒλ΅ λ³€ν™ |
| **λ΅λ“ λ°Έλ°μ‹±** | μ—¬λ¬ μ”μ²­μ„ λ°±μ—”λ“ μ„λ²„λ΅ λ¶„μ‚°ν•μ—¬ μ‹μ¤ν… ν¨μ¨μ„±μ„ λ†’μ΄κ³  μ•μ •μ„±μ„ λ³΄μ¥ |
| **μ—λ¬ μ²λ¦¬** | λ¥ κ΄€λ¦¬ λ° νλ΅ μ°¨λ‹¨(Circuit Breaker) κΈ°λ¥μΌλ΅ μ‹μ¤ν… λ³΄νΈ |
| **λ¨λ‹ν„°λ§ λ° λ΅κΉ…** | API μ‚¬μ©λ‰ λ° μ„±λ¥ λ°μ΄ν„°λ¥Ό κΈ°λ΅, λ¶„μ„, μ‹κ°ν™”ν•μ—¬ κ΄€λ¦¬ ν¨μ¨μ„± μ¦λ€ |
| **λ°μ΄ν„° μΊμ‹±** | μμ£Ό μ”μ²­λλ” λ°μ΄ν„°λ¥Ό μΊμ‹±ν•΄ μ”μ²­ μ²λ¦¬ μ†λ„ ν–¥μƒ |

## API Gateway λ™μ‘κ³Όμ •

![image](https://github.com/user-attachments/assets/7b0242a9-5ecf-46fc-b843-f3360191c4d8)


**Step 1. ν΄λΌμ΄μ–ΈνΈ μ”μ²­** 

ν΄λΌμ΄μ–ΈνΈκ°€ HTTP μ”μ²­μ„ API κ²μ΄νΈμ›¨μ΄λ΅ λ³΄λƒ„

**Step 2. μ”μ²­ λ¶„μ„ λ° κ²€μ¦**

API κ²μ΄νΈμ›¨μ΄λ” HTTP μ”μ²­μ μ†μ„±μ„ λ¶„μ„ν•κ³  μ ν¨μ„±μ„ κ²€μ‚¬

**Step 3. ν—μ©/κ±°λ¶€ λ©λ΅ ν™•μΈ**

ν—μ©(allow-list) λ° κ±°λ¶€(deny-list) μ²΄ν¬λ¥Ό μν–‰

**Step 4. μΈμ¦ λ° κ¶ν• ν™•μΈ**

API κ²μ΄νΈμ›¨μ΄λ” Identity Provider(μ•„μ΄λ΄ν‹°ν‹° μ κ³µμ)μ™€ ν†µμ‹ ν•μ—¬ μ”μ²­μ„ μΈμ¦ λ° κ¶ν• ν™•μΈ

**Step 5. μ”μ²­ μ ν• μ μ©**

μ”μ²­ μ ν• κ·μΉ™(rate limiting)μ„ μ μ©. μ΄κ³Όλ κ²½μ° μ”μ²­μ„ κ±°λ¶€

**Step 6-7. κ²½λ΅ λ§¤μΉ­**

μ”μ²­μ΄ κΈ°λ³Έμ μΈ κ²€μ‚¬λ¥Ό ν†µκ³Όν•λ©΄ API κ²μ΄νΈμ›¨μ΄λ” κ²½λ΅ λ§¤μΉ­(Path Matching)μ„ ν†µν•΄ μ μ ν• μ„λΉ„μ¤λ¥Ό μ°Ύμ•„ μ”μ²­μ„ λΌμ°ν…

**Step 8. ν”„λ΅ν† μ½ λ³€ν™**

μ”μ²­μ„ μ μ ν• ν”„λ΅ν† μ½λ΅ λ³€ν™ν• λ’¤ λ°±μ—”λ“ λ§μ΄ν¬λ΅μ„λΉ„μ¤λ΅ μ „λ‹¬

**Step 9-12. μ—λ¬ μ²λ¦¬ λ° λ΅κΉ…**

μ—λ¬λ¥Ό μ²λ¦¬ν•κ³  λ³µκµ¬κ°€ μ§€μ—°λ  κ²½μ° `νλ΅ μ°¨λ‹¨(circuit break)`μ„ μ μ©. λν• `ELK μ¤νƒ(Elastic-Logstash-Kibana)`μ„ ν†µν•΄ `λ΅κΉ… λ° λ¨λ‹ν„°λ§`μ„ μν–‰ν•κ³ , `λ°μ΄ν„° μΊμ‹±`μ„ μ§€μ›ν•κΈ°λ„ ν•¨

## API Gatewayλ¥Ό μ‚¬μ©ν•λ” μ΄μ 

- **λ³΄μ• κ°•ν™”**: λ―Όκ°ν• λ°μ΄ν„°μ— λ€ν• μ ‘κ·Όμ„ μ¤‘μ•™μ—μ„ ν†µμ 
- **μ μ—°μ„±**: μ”μ²­μ„ μ—¬λ¬ μ„λΉ„μ¤λ΅ λΌμ°ν…ν•κ±°λ‚ λ³€ν™ν•  μ μμ–΄ μ‹μ¤ν…μ μ μ—°μ„±μ΄ λ†’μ•„μ§
- **ν™•μ¥μ„±**: μ”μ²­ νΈλν”½μ΄ λ§μ•„μ§ κ²½μ° μ„λ²„ λ¶€ν•λ¥Ό λ¶„μ‚°ν•κ±°λ‚ μ ν•ν•  μ μμ
- **ν†µν•© κ΄€λ¦¬**: λ¨λ“  API μ”μ²­κ³Ό μ‘λ‹µμ„ ν• κ³³μ—μ„ κ΄€λ¦¬ν•λ―€λ΅ μ΄μ ν¨μ¨μ΄ ν–¥μƒλ¨
- **κ°λ°μ μƒμ‚°μ„± ν–¥μƒ**: λ°±μ—”λ“ μ„λΉ„μ¤μ— λ€ν• μ§μ ‘μ μΈ μ ‘κ·Όμ„ λ§‰μ•„ κ°λ°ν€μ΄ κ° μ„λΉ„μ¤μ—λ§ μ§‘μ¤‘ν•  μ μμ

## μ°Έκ³ 

https://github.com/ByteByteGoHq/system-design-101/?tab=readme-ov-file#what-does-api-gateway-do

https://en.wikipedia.org/wiki/API_management

[https://inpa.tistory.com/entry/AWS-π“-API-Gateway-κ°λ…-κΈ°λ³Έ-μ‚¬μ©λ²•-μ •λ¦¬](https://inpa.tistory.com/entry/AWS-%F0%9F%93%9A-API-Gateway-%EA%B0%9C%EB%85%90-%EA%B8%B0%EB%B3%B8-%EC%82%AC%EC%9A%A9%EB%B2%95-%EC%A0%95%EB%A6%AC)
